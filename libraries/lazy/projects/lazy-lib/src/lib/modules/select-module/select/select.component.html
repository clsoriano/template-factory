<div [formGroup]="fgroup" [hidden]="inputElement.hidden">

    <mat-form-field [ngClass]="divParent.class" 
                [style]="divParent.style" 
                [appearance]="inputElement.appareance"
                [floatLabel]="inputElement.floatLabel">
    
        <mat-label>{{ inputElement.label }}</mat-label>

        <mat-select [id]="inputElement.id" 
                    [formControlName]="inputElement.id"
                    [placeholder]="inputElement.placeholder"
                    [ngClass]="inputElement.class"
                    [style]="inputElement.style"
                    [errorStateMatcher]="matcher"
                    (selectionChange)="_handleInput(fgroup.controls[inputElement.id], $event)">
            <mat-option *ngFor="let option of matOptions | async" 
                [value]="option"
                [disabled]="option.disabled">
              {{ option[inputElement.viewValue] }}
            </mat-option>
        </mat-select>
        
        <mat-hint>
            {{ inputElement.hint }}
        </mat-hint>
        
        <!-- Errors on input -->
        <mat-error>
            {{ getError() }}
        </mat-error>
        

        <!-- Icon position validation -->
        <ng-template [ngIf]="inputElement.icon">

            <ng-template [ngIf]="inputElement.iconPosition == 'prefix'" [ngIfElse]="suffix">
                <mat-icon matPrefix>
                    {{inputElement.icon}}
                </mat-icon>
            </ng-template>

            <ng-template #suffix>
                <mat-icon matSuffix>
                    {{inputElement.icon}}
                </mat-icon>
            </ng-template>

        </ng-template>

    </mat-form-field>
</div>